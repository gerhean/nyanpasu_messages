(function(e){function t(t){for(var s,c,o=t[0],u=t[1],i=t[2],d=0,p=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(p.length)p.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(s=!1)}s&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var s={},a={app:0},r=[];function c(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=s,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(n,s,function(t){return e[t]}.bind(null,s));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/nyanpasu_messages/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"35fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("7a23"),a=(n("ab8b"),n("7b17"),n("aa23")),r=n.n(a),c=Object(s["e"])("img",{class:"img-renge",alt:"Vue logo",src:r.a},null,-1);function o(e,t,n,a,r,o){var u=Object(s["m"])("HelloWorld");return Object(s["h"])(),Object(s["d"])(s["a"],null,[c,Object(s["f"])(u)],64)}var u=function(e){return Object(s["j"])("data-v-3efd15e1"),e=e(),Object(s["i"])(),e},i={class:"hello"},l=u((function(){return Object(s["e"])("h1",null,"Nyanpasu Message Board",-1)})),d={class:"card-list overflow-auto",ref:"cardList"},p={class:"my-footer"},m={class:"mb-3 message-input"};function f(e,t,n,a,r,c){var o=Object(s["m"])("MessageCard");return Object(s["h"])(),Object(s["d"])("div",i,[l,Object(s["e"])("div",d,[(Object(s["h"])(!0),Object(s["d"])(s["a"],null,Object(s["l"])(e.messages,(function(e){return Object(s["h"])(),Object(s["c"])(o,{msg:e,key:e.count},null,8,["msg"])})),128))],512),Object(s["e"])("div",p,[Object(s["e"])("div",m,[Object(s["q"])(Object(s["e"])("input",{type:"text",class:"form-control",id:"messageForm","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.messageInput=e}),placeholder:"Nyanpasu!"},null,512),[[s["o"],r.messageInput]])]),Object(s["e"])("button",{onClick:t[1]||(t[1]=function(){return c.sendMessage&&c.sendMessage.apply(c,arguments)}),type:"button",class:"send-btn btn btn-success"},"Shout!")])])}var b=n("5502"),g={class:"card my-card"},h={class:"card-header"},j={class:"card-body"},O={class:"blockquote mb-0"};function v(e,t,n,a,r,c){return Object(s["h"])(),Object(s["d"])("div",g,[Object(s["e"])("div",h," Nyanpasu "+Object(s["n"])(n.msg.count)+", sent: "+Object(s["n"])(c.time),1),Object(s["e"])("div",j,[Object(s["e"])("blockquote",O,[Object(s["e"])("p",null,Object(s["n"])(n.msg.msg),1)])])])}var y={name:"MessageCard",props:{msg:Object},computed:{time:function(){return new Date(this.msg.time).toLocaleTimeString()}}},_=(n("a6d8"),n("6b0d")),w=n.n(_);const x=w()(y,[["render",v],["__scopeId","data-v-e74a2d5a"]]);var k=x,T=n("8fe5"),M=n.n(T),S={name:"HelloWorld",data:function(){return{messageInput:""}},components:{MessageCard:k},computed:Object(b["b"])(["messages"]),mounted:function(){this.$store.dispatch("load_backend_messages")},watch:{messages:{handler:function(){var e=this;this.$nextTick((function(){return e.scrollToEnd()}))},deep:!0}},methods:{sendMessage:function(){this.$store.dispatch("send_message",{message_str:this.messageInput}),this.messageInput="";var e=new Audio(M.a);e.play()},scrollToEnd:function(){this.$refs.cardList.scrollTop=this.$refs.cardList.lastElementChild.offsetTop}}};n("cf34");const P=w()(S,[["render",f],["__scopeId","data-v-3efd15e1"]]);var I=P,C={name:"App",components:{HelloWorld:I}};n("abba");const N=w()(C,[["render",o]]);var $=N,E=n("1da1"),H=(n("96cf"),n("bf19"),n("d3b7"),n("e9c4"),[{count:1,msg:"Have a nice day!",time:"2022-01-30T08:01:46.356Z"},{count:2,msg:"Nyanpasu!",time:"2022-01-30T08:03:10.862Z"}]),J="https://protean-acrobat-339806.as.r.appspot.com/",L=Object(b["a"])({state:function(){return{session_count:0,messages:[]}},mutations:{append_message:function(e,t){e.messages.push(t)},load_example_messages:function(e){e.messages=H},load_messages:function(e,t){e.messages=t}},actions:{load_example_messages:function(e){e.commit("load_example_messages")},send_message:function(e,t){return Object(E["a"])(regeneratorRuntime.mark((function n(){var s,a,r,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,a=J+"messages",r={msg:t.message_str||"にゃんぱすー!",time:(new Date).toJSON()},console.log(r),n.next=6,fetch(a,{method:"POST",body:JSON.stringify(r)});case 6:return c=n.sent,n.next=9,c.json();case 9:if(o=n.sent,!o.error){n.next=12;break}return n.abrupt("return");case 12:s("append_message",o);case 13:case"end":return n.stop()}}),n)})))()},load_backend_messages:function(e){return Object(E["a"])(regeneratorRuntime.mark((function t(){var n,s,a,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,s=e.dispatch,a=J+"messages",t.next=4,fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:c=t.sent,c.error?s("load_example_messages"):n("load_messages",c);case 9:case"end":return t.stop()}}),t)})))()}}}),R=Object(s["b"])($);R.use(L),R.mount("#app")},"7a14":function(e,t,n){},"8fe5":function(e,t,n){e.exports=n.p+"media/nyanpasu.b399a5ab.mp3"},a6d8:function(e,t,n){"use strict";n("35fd")},aa23:function(e,t,n){e.exports=n.p+"img/miyauchi-renge.4530c7c1.jpg"},abba:function(e,t,n){"use strict";n("7a14")},cf34:function(e,t,n){"use strict";n("f3c2")},f3c2:function(e,t,n){}});
//# sourceMappingURL=app.998c9f88.js.map